{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}Create Article - Cyblime Cycling Club{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <!-- Header -->
            <div class="bg-gradient-to-r from-cyblime-blue to-cyblime-green px-6 py-4">
                <h1 class="text-2xl font-bold text-white">Create New Article</h1>
                <p class="text-blue-100 mt-1">Share cycling knowledge with the community</p>
            </div>
            
            <div class="p-6">
                <form method="post" enctype="multipart/form-data" class="space-y-6">
                    {% csrf_token %}
                    
                    <!-- Title -->
                    <div>
                        <label for="{{ form.title.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            Article Title *
                        </label>
                        <input type="text" name="{{ form.title.name }}" 
                               id="{{ form.title.id_for_label }}" 
                               value="{{ form.title.value|default:'' }}"
                               class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-cyblime-blue focus:ring-cyblime-blue text-lg"
                               placeholder="What's your article about?"
                               {% if form.title.field.required %}required{% endif %}>
                        {% if form.title.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.title.errors.0 }}</p>
                        {% endif %}
                    </div>
                    
                    <!-- Image Upload -->
                    <div>
                        <label for="{{ form.image.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            Featured Image
                        </label>
                        <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-cyblime-blue transition duration-200">
                            <div class="space-y-1 text-center">
                                <i class="fas fa-image text-3xl text-gray-400"></i>
                                <div class="flex text-sm text-gray-600">
                                    <label for="{{ form.image.id_for_label }}" 
                                           class="relative cursor-pointer bg-white rounded-md font-medium text-cyblime-blue hover:text-blue-700 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-cyblime-blue">
                                        <span>Upload a file</span>
                                        {{ form.image }}
                                    </label>
                                    <p class="pl-1">or drag and drop</p>
                                </div>
                                <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
                            </div>
                        </div>
                        {% if form.image.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.image.errors.0 }}</p>
                        {% endif %}
                    </div>
                    
                    <!-- Content -->
                    <div>
                        <label for="{{ form.content.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            Article Content *
                        </label>
                        <textarea name="{{ form.content.name }}" 
                                  id="{{ form.content.id_for_label }}" 
                                  rows="15"
                                  class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-cyblime-blue focus:ring-cyblime-blue"
                                  placeholder="Write your article content here. Share your cycling knowledge, tips, experiences, or insights with the community..."
                                  {% if form.content.field.required %}required{% endif %}>{{ form.content.value|default:'' }}</textarea>
                        {% if form.content.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.content.errors.0 }}</p>
                        {% endif %}
                        <p class="mt-1 text-sm text-gray-500">
                            <i class="fas fa-info-circle mr-1"></i>
                            Write a comprehensive, informative article. Use line breaks to format your content.
                        </p>
                    </div>
                    
                    <!-- Publishing Info -->
                    <div class="bg-blue-50 rounded-lg p-4">
                        <h3 class="text-sm font-medium text-blue-900 mb-2">Article Guidelines</h3>
                        <ul class="text-sm text-blue-800 space-y-1 list-disc pl-4">
                            <li>Keep content relevant to cycling</li>
                            <li>Provide accurate and helpful information</li>
                            <li>Use clear, easy-to-understand language</li>
                            <li>Include practical tips or insights</li>
                            <li>Only staff members can publish articles</li>
                        </ul>
                    </div>
                    
                    <!-- Form Actions -->
                    <div class="flex flex-col sm:flex-row justify-between items-center space-y-3 sm:space-y-0 pt-6 border-t border-gray-200">
                        <a href="{% url 'articles:list' %}" 
                           class="w-full sm:w-auto text-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyblime-blue transition duration-150 ease-in-out">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Back to Articles
                        </a>
                        
                        <div class="flex space-x-3 w-full sm:w-auto">
                            <button type="reset" 
                                    class="flex-1 sm:flex-none px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition duration-150 ease-in-out">
                                <i class="fas fa-undo mr-2"></i>
                                Reset
                            </button>
                            <button type="submit" 
                                    class="flex-1 sm:flex-none px-6 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-cyblime-blue hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyblime-blue transition duration-150 ease-in-out">
                                <i class="fas fa-save mr-2"></i>
                                Publish Article
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}